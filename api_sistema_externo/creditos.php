<?php
// Simulación de datos de historial crediticio
$historiales_crediticios = [
    '41893255' => [
        ['fecha' => '2023-01-01', 'monto' => 1000, 'estado' => 'Pagado'],
        ['fecha' => '2023-02-15', 'monto' => 500, 'estado' => 'Pendiente'],
        ['fecha' => '2023-03-20', 'monto' => 800, 'estado' => 'Pagado'],
    ],
    '14782699' => [
        ['fecha' => '2023-01-10', 'monto' => 1500, 'estado' => 'Pagado'],
        ['fecha' => '2023-02-20', 'monto' => 200, 'estado' => 'Pagado'],
    ],
];

// Obtener el DNI de la solicitud
if (isset($_GET['dni'])) {
    $dni = $_GET['dni'];

    // Verificar si el DNI existe en la base de datos simulada
    if (array_key_exists($dni, $historiales_crediticios)) {
        // Devolver el historial crediticio en formato JSON
        header('Content-Type: application/json');
        echo json_encode($historiales_crediticios[$dni]);
    } else {
        // Si el DNI no existe, devolver una respuesta vacía
        header('Content-Type: application/json');
        echo json_encode([]);
    }
} else {
    // Si no se proporciona un DNI, devolver un error
    header('HTTP/1.1 400 Bad Request');
    echo json_encode(['error' => 'DNI no proporcionado']);
}
?>